<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><style type="text/css"><!--
  h1 { font-weight: bold; font-size: 21.5pt; }
 .p, p { font-weight: normal; font-size: 9.5pt; }
 h2 { font-weight: bold; font-size: 15.5pt; }
 .s2 { color: #666; font-weight: normal; font-size: 7.5pt; }
 .s3 { font-weight: normal; font-size: 7.5pt; }
 .s4 { font-weight: normal; text-decoration: underline; font-size: 7.5pt; }
 a { font-weight: normal; font-size: 9.5pt; }
 .s5 { font-family: serif; font-weight: normal; font-size: 7.5pt; }
 .s6 { color: #666; font-weight: normal; font-size: 7.5pt; }
 .s8 { font-weight: normal; text-decoration: underline; font-size: 9.5pt; }
 .s9 { font-weight: normal; text-decoration: underline; font-size: 7.5pt; }
 .s10 { font-weight: normal; font-size: 7.5pt; }
  -->
</style></head><body><p><span><IMG width="762" height="22" src="FMQL_Corner-2014/Image_001.png"/></span></p><h1>FMQL Corner</h1><p>Together the Department of Defense&#39;s CHCS and VistA from the Veterans Administration represent the most widely deployed medical record system on the planet.<br/>Both are built around a MUMPS-based data repository called <i>FileMan </i>- <i>VistA or CHCS data </i>is <i>FileMan data</i>. Though efficient and flexible, FileMan has no remote query language or formal schema definition mechanism - there is no &quot;SQL for FileMan&quot;.<br/>Instead data is transferred to and from FileMan using three kinds of mechanism: thousands of remote procedure calls (RPCs), flavors of HL7 v2 and &quot;SQL-projection&quot;, where select data types (files) are mapped to SQL tables. But no one mechanism works for all data and each demands careful handling.<br/>FMQL, the FileMan Query Language, changes this. Patient data, Institution data, Conceptual information (&quot;Know-how&quot;), System records - to FMQL, this is all just data to extract. By delivering one uniform mechanism for extracting any data, FMQL makes VistA and CHCS data access easy and let&#39;s you focus on analyzing and presenting data.</p><h2>All Data and Schema too</h2><p><span><IMG width="637" height="256" src="FMQL_Corner-2014/Image_002.jpg"/></span><br/>FMQL provides access to both FileMan data - a vital measurement of a patient - and the schema of that data - the type &quot;Vital<br/>Measurement&quot;. It addresses:<br/>1.  Identity: every entity and entity type in FileMan gets a unique identifier - a URI<br/>2.  Data Formats: a consistent form of JSON, the web-friendly response format, for every type of data in the system as well as HTML for human readers and RDF for web-data practitioners<br/>3.  Query Nuance: from the precise - SELECT - to the broader - DESCRIBE - or just COUNT, covers data hierarchies and graphical layouts, paging and filtering</p><h2>It&#39;s VistA on the Web of Data</h2><p>FMQL draws on SPARQL, the w3c&#39;s query language for the <i>Web of Data </i>(or <i>Semantic Web</i>). As FileMan&#39;s data is more web-like than relational, some of SPARQL&#39;s query syntax and response formats proved ideal for a FileMan query language and much of the underlying theories and practices of SPARQL apply to FMQL. As a result, an FMQL-enabled VistA fits naturally into a Web of Data environment.</p><h2>PIKS&#39;ing through VistA</h2><p>The PIKS (Patient-Institution-Knowhow-System) model divides any EHR&#39;s data into four broad categories. This table shows how FMQL<br/>exposes an example of each type of data in a VistA - Caregraf&#39;s demo <i>livevista.caregraf.info </i>- in three different formats ...</p><p class="s2">PIKS                                                             Data                                                                                                  FMQL</p><table border="1" cellspacing="0" style="border-collapse:collapse"><tr><td><p class="s3">Patient</p></td><td><p class="s3">A SIMVASTATIN  Prescription (URI: 52­27)</p></td><td><p class="s3">DESCRIBE 52­27 (<u>HTML</u>|<u>JSON</u>|<u>RDF</u>)</p></td></tr><tr><td><p class="s3">Institution</p></td><td><p class="s3">ENDOSCOPY Location (URI: 44­14)</p></td><td><p class="s3">DESCRIBE 44­14 (<u>HTML</u>|<u>JSON</u>|<u>RDF</u>)</p></td></tr><tr><td><p class="s3">Knowhow</p></td><td><p class="s3">Drug Clozapine (URI: 50_68­16496)</p></td><td><p class="s3">DESCRIBE 50_68­16496 (<u>HTML</u>|<u>JSON</u>|<u>RDF</u>)</p></td></tr><tr><td><p class="s3">System</p></td><td><p class="s3">KIDs Package (URI: 9_4­2)</p></td><td><p class="s3">DESCRIBE 9_4­2 (<u>HTML</u>|<u>JSON</u>|<u>RDF</u>)</p></td></tr></table><h2>Linked (VistA) Data</h2><p>FMQL exposes all of VistA&#39;s data on the web but <i>Linked-Data </i>demands more. This approach to data publication demands that URIs which identify data can be looked up on the web, that data URIs should act like web page URIs. They must not just identify - they must be live on the web and lead to “useful information”.<br/><a href="http://livevista.caregraf.info/52-14)">In other words, with just the URI FMQL gives to a Prescription (</a><a href="http://livevista.caregraf.info/52-14)" class="s5">http://livevista.caregraf.info/52-14</a>), you should be able to get its full description and links to descriptions of related things. And it turns out that once you have an FMQL endpoint, this facility is easy to provide.<br/>Reconsider the data in the table above ...</p><table border="1" cellspacing="0" style="border-collapse:collapse"><tr><td><p class="s6">PIKS</p></td><td><p class="s6">Data</p></td><td><p class="s6">Live URI</p></td><td><p class="s6">Non HTML Forms</p></td></tr><tr><td><p class="s3">Patient</p></td><td><p class="s3">A SIMVASTATIN  Prescription (URI: 52­27)</p></td><td><p class="s4">http://livevista.caregraf.info/52­27</p></td><td><p class="s4">?format=JSON<span class="s3">  | </span>?format=RDF</p></td></tr><tr><td><p class="s3">Institution</p></td><td><p class="s3">ENDOSCOPY Location (URI: 44­14)</p></td><td><p class="s4">http://livevista.caregraf.info/44­14</p></td><td><p class="s4">?format=JSON<span class="s3">  | </span>?format=RDF</p></td></tr><tr><td><p class="s3">Knowhow</p></td><td><p class="s3">Drug Clozapine (URI: 50_68­16496)</p></td><td><p class="s4">http://livevista.caregraf.info/50_68­16496</p></td><td><p class="s4">?format=JSON<span class="s3">  | </span>?format=RDF</p></td></tr><tr><td><p class="s3">System</p></td><td><p class="s3">KIDs Package (URI: 9_4­2)</p></td><td><p class="s4">http://livevista.caregraf.info/9_4­2</p></td><td><p class="s4">?format=JSON<span class="s3">  | </span>?format=RDF</p></td></tr></table><p>So instead of making a query about data, you can just invoke its URI - notice how you can still specify the data format you want using a query argument. Of course, there are still things a query language like FMQL provides which are too complex to render with a straightforward URI but for the equivalent of pointing - <i>give me a description of this thing </i>- Linked (VistA) Data is both easy to understand and use.</p><h2>Play with it</h2><p>Visit Caregraf’s demo VistA at <i>livevista.caregraf.info </i>which supports three FMQL-enabled applications …<br/><span><IMG width="5" height="5" src="FMQL_Corner-2014/Image_003.png"/></span><br/>Go anywhere with the <i>FileMan Rambler </i>- the unfortunate <u>patient Jones</u> has a story to tell.<br/><span><IMG width="5" height="5" src="FMQL_Corner-2014/Image_004.png"/></span><br/>Understand the meaning of FileMan’s data with the <i>FileMan Native Schema Browser</i>. Here’s the<br/>definition of <u>Problem</u>, <u>Prescription</u> and the lynchpin of so much, <u>Patient</u>.<br/><span><IMG width="5" height="5" src="FMQL_Corner-2014/Image_005.png"/></span><br/>Make your own queries in the <u>FMQL Query Maker</u> and it gets you started with a range of examples.<br/>These clients come in the FMQL opensource release.</p><h2>Add FMQL to your VistA</h2><p><u><b>Download</b></u>, unzip and follow the <u>install instructions</u>. Any questions or problems, just <u>contact</u></p><p class="s8">Caregraf support<span class="p">.</span></p><p>Everything about FMQL from its VistA Plugin to clients and example code in HTML/Javascript, Python and Java are in the <u>fmql source code repository</u>.<br/>FMQL has been tested on both fully populated and test FileMan-based systems:</p><h2>More in&#39;s and out&#39;s</h2><p>Consult the <u>FMQL Wiki</u> ...<br/><span><IMG width="5" height="5" src="FMQL_Corner-2014/Image_006.png"/></span><br/>OpenVistA, VxVistA, and WorldVistA – the open source FOIA based VistAs<br/><span><IMG width="5" height="5" src="FMQL_Corner-2014/Image_007.png"/></span><br/>CHCS<br/><span><IMG width="5" height="5" src="FMQL_Corner-2014/Image_008.png"/></span><br/>GT/M on Linux, Cache on Windows and Linux<br/><span><IMG width="778" height="1" src="FMQL_Corner-2014/Image_009.png"/></span></p><p class="s9">Semantic VistA<span class="s10"> - Mastering VistA&#39;s Data                                                                                                                                                                      © Caregraf, 2014 -- </span>Contact</p></body></html>
